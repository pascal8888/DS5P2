---
title: "Severe Weather - Health and Property Impacts Analysis"
author: "Analyst: James Schacht"
date: "Report Compiled: July, 2015"
output: 
    html_document: 
        keep_md: true
---
##Synopsis
###Background
<p>
This report uses data from the <a href=https://www.ncdc.noaa.gov/" target="_blank">National Oceanic and Atmospheric Administration's (NOAA)</a> National Climatic Data Center database to provide a descriptive analysis of event types causing human harm and economic impact to property. 
</p>
<p>
Although the data source spans from 1950, the year it was first captured, through 2011-11-30, agency directive "10-1605", introduced January 1996, provides a consistent data set with modern context. More information about the data collection and processing evolution can be found <a href="https://www.ncdc.noaa.gov/stormevents/details.jsp" target="_blank">here</a>.  This report uses a subset of the data beginning 1996-01-01 through 2011-11-30.
</p> <-
<p>
<a href="https://d396qusza40orc.cloudfront.net/repdata%2Fpeer2_doc%2FNCDC%20Storm%20Events-FAQ%20Page.pdf" target="_blank">Source Data FAQ</a>
</p>
###What the Data Shows
...


##Data Processing
###R Packages Used: dplyr, lubridate
```{r}
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(lubridate))
suppressPackageStartupMessages(library(ggplot2))
``` 

```{r cache=TRUE}
if (!exists("NOAAdata.csv.bz2")){
    download.file("http://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2", "NOAAdata.csv.bz2", mode="wb")
}
if (!exists("stormdata")) {
    stormdata <- read.csv("NOAAdata.csv.bz2")
}
stormdata$EVTYPE <- gsub("^\\s+|\\s+$", "", stormdata$EVTYPE)
stormdata <- mutate(stormdata, BGN_DATE = mdy_hms(BGN_DATE))
indx <- which(stormdata$BGN_DATE >= "1996-01-01")
stormdata <- stormdata[indx,]
cols_people <- c(8,23:24)
cols_property <- c(8,25:28)
df_people <- select(stormdata,cols_people)
df_property <- select(stormdata,cols_property)
df_property$PROPDMGEXP <- tolower(df_property$PROPDMGEXP)
df_property$CROPDMGEXP <- tolower(df_property$CROPDMGEXP)
df_people_fatalities <- group_by(df_people, EVTYPE) %>% summarize(sum(FATALITIES))
df_people_injuries <- group_by(df_people, EVTYPE) %>% summarize(sum(INJURIES))
names(df_people_fatalities) <- c("EVTYPE","FATALITIES")
names(df_people_injuries) <- c("EVTYPE","INJURIES")
df_people_fatalities <- arrange(df_people_fatalities,desc(FATALITIES))
df_people_injuries <- arrange(df_people_injuries,desc(INJURIES))
max_injINDX <- which(df_people_injuries[,2]==max(df_people_injuries[,2]))
max_fatINDX <- which(df_people_fatalities[,2]==max(df_people_fatalities[,2]))
tmp <- qplot(df_people_fatalities$FATALITIES[1:10],df_people_fatalities$EVTYPE[1:10],xlab="Number Fatalities",ylab="Event Type",main="Top 10 Fatal Weather Events 1996/01/01 - 2011/11/30",color="red", size=10)
tmp + theme(legend.position="none")
```

##Results

```{r}
#rm(list=ls())
```
